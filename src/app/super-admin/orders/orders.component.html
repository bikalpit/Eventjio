<div class="main bg-white sub-container order">
    <div class="loader-main" *ngIf="isLoaderAdmin"><img src="../../../assets/loading-spinner.gif" /></div>
    <div class="col-12">
        <div class="row">
            <div class="font-weight-bold page-title">
                Orders
            </div>
        </div>
    </div>
    <div class="col-12 mt-3 manage-order">
        <div class="manage-order-details">
            <div class="row">
                <div class="col-12">
                    <div class="row">
                        <div class="sub-title font-weight-bold">
                            Manage
                        </div>

                        <div class="ml-auto ">
                            <button mat-flat-button class=" px-3 mr-2 bg-primary text-light" (click)="exportOredr()">Export orders</button>
                            <button mat-flat-button class=" px-3 ml-2 bg-primary text-light" (click)="addNewOredr()">Add new order</button>
                        </div>
                    </div>
                </div>

                <div class="col-12 searchbox p-0 search-bar rounded">
                    <i class="fa fa-search "></i>
                    <input matInput type="text" class="form-control" [(ngModel)]="search" (keyup)="fngetallOrders()" placeholder="Search by name, email, transaction id, or ticket code">   
                </div>
                <div class="col-12 p-0 order-event">
                    <div class="" fxFlex="34">
                        <label class="mb-0">Event</label>
                        <div class="">
                            <mat-select class="form-control ">
                                <mat-option>All Events</mat-option>
                                <mat-option>Lajavab Cooking Classes (Mon 17 Jun 2020)</mat-option>
                                <mat-option>Dracula Drink (Mon 17 Jun 2020)</mat-option>
                                <mat-option>The Ladies Kitty Party (Mon 17 Jun 2020)</mat-option>
                            </mat-select>
                        </div>
                    </div>

                    <div class="ml-4" fxFlex="20">
                        <label class="mb-0">Order date form</label>
                        <div class="matDate">
                            <mat-datepicker-toggle matPrefix [for]="ticketIssuedDatePicker" class="dateIcon">  </mat-datepicker-toggle>
                            <input type="text" [matDatepicker]="ticketIssuedDatePicker" (click)="ticketIssuedDatePicker.open()" class="form-control matInputdate " [(ngModel)]="start_date.keyword" (keyup)="fngetallOrders()" >
                            <mat-datepicker #ticketIssuedDatePicker></mat-datepicker>
                        </div>
                    </div>

                    <div class="mx-4" fxFlex="20">
                        <label class="mb-0">Order date to</label>
                        <div class="matDate">
                            <mat-datepicker-toggle matSuffix [for]="ticketIssuedTo" class="dateIcon"></mat-datepicker-toggle>
                            <input type="text" [matDatepicker]="ticketIssuedTo" (click)="ticketIssuedTo.open()" class="form-control matInputdate">
                            <mat-datepicker #ticketIssuedTo></mat-datepicker>
                        </div>
                    </div>

                    <div class="" fxFlex="20">
                        <label class="mb-0">Order Status</label>
                        <div class="">
                            <mat-select class="form-control ">
                                <mat-option>All Orders</mat-option>
                                <mat-option>Completed ordes</mat-option>
                                <mat-option>Pending orders</mat-option>
                                <mat-option>Cancelled orders</mat-option>
                                <mat-option>Complete order</mat-option>
                            </mat-select>
                        </div>
                    </div>

                </div>

            </div>
        </div>

        <div class="events ">
            <div class="service-listing">
                <div class="main-table-content main-cust-table-content ">
                    <div class="">
                        <div class="heads main-heading-content drageble py-3" fxLayout="row">
                            <div class="ml-5" fxFlex="10">Order ID</div>
                            <div class="" fxFlex="10">Status</div>
                            <div class="" fxFlex="13">Name</div>
                            <div class="" fxFlex="20">Date / Time</div>
                            <div class="" fxFlex="27">Event</div>
                            <div class="" fxFlex="10">Value</div>
                            <div class="" fxFlex="10">Action</div>
                        </div>

                        <div class="drageble-list">
                            <div class="drageble-box" fxLayout="row" *ngFor="let element of allorderlist">
                                <div class="tb-data ml-5 " fxFlex="10" (click)="eventSummary()"> <a class="text-dark" (click)="eventSummary()"> 12345</a></div>
                                <div class="tb-data" fxFlex="10"><span class="cpn-bor" [ngStyle]="{'color':element.status === 'Completed' ? '#2BB800' : '#FF0000' }">
                                    {{element.order_status=='P' ? 'Pending' : 'Completed'}}</span></div>
                                <div class="tb-data" fxFlex="13">{{element.customer.firstname + " " +element.customer.lastname}}</div>
                                <div class="tb-data" fxFlex="20">{{element.order_date |date :'fullDate'}} / {{element.order_time}}</div>
                                <div class="tb-data" fxFlex="27">{{element.events.event_title}} <span class="order-data-date"> (Mon 17 Jun 2020) </span></div>
                                <div class="tb-data" fxFlex="10">{{element.prize}}</div>
                                <div class="tb-data" fxFlex="10">
                                    <mat-icon [ngbPopover]="popContent" placement="bottom" aria-hidden="false" aria-label="Example home icon" class="action-icon">more_horiz</mat-icon>
                                    <!-- <i class="fa fa-ellipsis-h action-icon" aria-hidden="true"></i> -->
                                    <ng-template class="popover" #popContent>
                                        <div class="px-3  border-bottom">
                                            <i class="fa fa-repeat mr-2 pointer" (click)="resendOrder()"></i><span class="pointer" (click)="resendOrder()">Resend</span>
                                        </div>

                                        <div class="px-3  border-bottom">
                                            <i class="fa fa-pencil mr-2 pointer" (click)="editOrder()"></i><span (click)="editOrder()" class="pointer">Edit</span>
                                        </div>

                                        <div class="px-3  border-bottom">
                                            <i class="fa fa-ticket mr-2"  (click)="eventSummary()"></i><span class="pointer" (click)="eventSummary()">Download Tickets</span>
                                        </div>

                                        <div class="px-3  border-bottom">
                                            <i class="fa fa-times-circle mr-2 pointer"></i><span class="pointer">Cancel</span>
                                        </div>

                                    </ng-template>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="table_pagination mt-4" *ngIf="allorderlist != ''">
                        <nav aria-label="Page navigation example">
                            <ul class="pagination justify-content-end">
                                <li class="page-item" (click)="navigateTo_orders(first_page_url_orders)"><a class="page-link"><i class="fa fa-angle-double-left arrow-icon" aria-hidden="true"></i></a></li>
                                <li class="page-item" (click)="navigateTo_orders(prev_page_url_orders)"><a class="page-link"><i class="fa fa-angle-left arrow-icon" aria-hidden="true"></i></a></li>
                                <li class="page-item" [ngClass]="{'active':current_page_orders == i+1}" *ngFor="let pagenumber of arrayOne_orders(last_page_orders); let i = index;" (click)="navigateToPageNumber_orders(i+1)"><a class="page-link">{{i+1}}</a></li>
                                <li class="page-item" (click)="navigateTo_orders(next_page_url_orders)"><a class="page-link"><i class="fa fa-angle-right arrow-icon" aria-hidden="true"></i></a></li>
                                <li class="page-item" (click)="navigateTo_orders(last_page_url_orders)"><a class="page-link"><i class="fa fa-angle-double-right arrow-icon" aria-hidden="true"></i></a></li>
                            </ul>
                        </nav>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>