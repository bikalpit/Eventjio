<div class="add-occurrence-form">
    <div class="loader-main" *ngIf="isLoaderAdmin"><img src="../../../assets/loading-spinner.gif" /></div>
    <div class="modal-header pl-3 py-0 border-0">
        <p class="font-weight-bold">Add single occurrence</p>
        <button class="close close-btn" type="button" data-dismiss="modal" aria-label="Close" (click)="onNoClick()">
        <span aria-hidden="true" class="white-text">&times;</span>
      </button>

    </div>

    <div class="modal-body">
        <div class="">
            <form [formGroup]="singleOccurrenceForm" class="with-validation">
                <div class="row mx-0 mt-2">
                    <label class="w-100">Starts<span><i class="fa fa-asterisk"></i></span></label>
                    <div class="form-group col-6 pl-0">
                        <input (dateChange)="fnChangeEventEndDate()" (click)="occurrence_start_date_picker.open()" [min]="minStartDate" [matDatepicker]="occurrence_start_date_picker" type="text" formControlName="occurrence_start_date" class=" col-12 form-control d-inline-block"
                            placeholder="DD/MM/YY" readonly>
                        <mat-datepicker #occurrence_start_date_picker></mat-datepicker>
                        <span style="left:0" class="error-wrap" *ngIf="singleOccurrenceForm.get('occurrence_start_date').touched || singleOccurrenceForm.get('occurrence_start_date').dirty">
                        <small *ngIf="singleOccurrenceForm.get('occurrence_start_date').hasError('required')" class="error">Occurence start date is required.</small>
                        </span>
                    </div>
                    <div class="form-group col-6">
                        <mat-select formControlName="occurrenceStartTime" class="col-10 form-control d-inline-block">
                            <mat-option (onSelectionChange)="fnChangeEndTime(i)" *ngFor="let fullDayTimeSlote of fullDayTimeSlote; let i=index" value="{{i}}">{{fullDayTimeSlote}}</mat-option>
                        </mat-select>

                        <span style="left:0" class="error-wrap" *ngIf="singleOccurrenceForm.get('occurrenceStartTime').touched || singleOccurrenceForm.get('occurrenceStartTime').dirty">
                            <small *ngIf="singleOccurrenceForm.get('occurrenceStartTime').hasError('required')" class="error">Occurence start time is required.</small>
                        </span>
                    </div>
                </div>
                <div class="row mx-0 mt-3">
                    <label class="w-100">Ends<span><i class="fa fa-asterisk"></i></span></label>
                    <div class="form-group col-6 pl-0">
                        <input (dateChange)="fnChangeEventEndDate()" (click)="occurrence_end_date_picker.open()" [min]="minEndDate" [matDatepicker]="occurrence_end_date_picker" type="text" formControlName="occurrence_end_date" class=" col-12 form-control d-inline-block" placeholder="DD/MM/YY"
                            readonly>
                        <mat-datepicker #occurrence_end_date_picker></mat-datepicker>
                        <span style="left:0" class="error-wrap" *ngIf="singleOccurrenceForm.get('occurrence_end_date').touched || singleOccurrenceForm.get('occurrence_end_date').dirty">
                        <small *ngIf="singleOccurrenceForm.get('occurrence_end_date').hasError('required')" class="error">Occurence end date is required.</small>
                        </span>
                    </div>
                    <div class="form-group col-6">
                        <!-- <mat-select formControlName="occurrenceEndTime" class="col-10 form-control d-inline-block">
                            <mat-option [disabled]="startEndTime >= fullDayTimeSlote" (onSelectionChange)="fnChangeEndTime(i)" *ngFor="let fullDayTimeSlote of fullDayTimeSlote; let i=index" value="{{i}}">{{fullDayTimeSlote}}</mat-option>
                        </mat-select> -->
                        <mat-select *ngIf="!startdateToday" formControlName="occurrenceEndTime" class="col-10 form-control d-inline-block">
                            <mat-option *ngFor="let fullDayTimeSlote of fullDayTimeSlote; let i=index" value="{{i}}">{{fullDayTimeSlote}}</mat-option>
                        </mat-select>
                        <mat-select *ngIf="startdateToday" formControlName="occurrenceEndTime" class="col-10 form-control d-inline-block">
                            <mat-option [disabled]="currentTime > fullDayTimeSlote" *ngFor="let fullDayTimeSlote of fullDayTimeSlote; let i=index" value="{{i}}">{{fullDayTimeSlote}}</mat-option>
                        </mat-select>
                        <span style="left:0" class="error-wrap" *ngIf="singleOccurrenceForm.get('occurrenceEndTime').touched || singleOccurrenceForm.get('occurrenceEndTime').dirty">
                            <small *ngIf="singleOccurrenceForm.get('occurrenceEndTime').hasError('required')" class="error">Occurence end time is required.</small>
                        </span>
                    </div>
                </div>
            </form>
        </div>



    </div>

    <div class="text-right">
        <button mat-flat-button class="save-btn ml-3" (click)="createSingleOccurrence()">Save</button>
    </div>
</div>