<div class="issued-ticket-view-container">
    <div class="loader-main" *ngIf="isLoaderAdmin"><img src="../../../assets/loading-spinner.gif" /></div>
    <div class="">
        <div class="modal-header pl-3 py-0 border-0">
            <p class="font-weight-bold">Ticket : {{data.ticket_id}}</p>

            <button type="button" *ngIf="ticketTypeView === 'normal'" data-dismiss="modal" aria-label="Close" class="close-btn" (click)="onNoClick()">
                <span aria-hidden="true" class="white-text">&times;</span>
            </button>

            <button type="button" *ngIf="ticketTypeView === 'confirm'" data-dismiss="modal" aria-label="Close" class="close-btn" (click)="fnVoidTicket('normal')">
                <span aria-hidden="true" class="white-text">&times;</span>
            </button>

            <button type="button" *ngIf="ticketTypeView === 'voidview'" data-dismiss="modal" aria-label="Close" class="close-btn" (click)="onNoClick()">
                <span aria-hidden="true" class="white-text">&times;</span>
            </button>
        </div>
    </div>

    <div *ngIf="ticketTypeView === 'normal'" class="pb-3">
        <div class="modal-body p-0">
            <div class="px-3 mt-3">
                <div class=" px-3">
                    <button mat-flat-button class="void-ticket-btn" (click)="fnVoidTicket('confirm')" *ngIf="data.order_status!='VO'">Void Ticket</button>
                    <button mat-flat-button class="print-ticket-btn ml-2" (click)="captureScreen()"> Print Ticket</button>
                </div>

                <div class="px-3 mt-4">
                    <div class="re-issue-notify p-3">
                        <i class="fa fa-bell fa-lg mr-2"></i> To re-issue or edit ticket details, click the order ID below.
                    </div>
                </div>
            </div>

            <div id="print-ticket">
                <div class="mt-3 ticket-detail-title">
                    <div class="p-3">
                        <p class="pl-3 m-0 font-weight-bold">Ticket details</p>
                    </div>
                </div>

                <div class="ticket-detail mt-2 p-3">
                    <div class="row m-0 pl-3">
                        <div class="ticket-detail-field font-weight-bold">
                            Order ID :
                        </div>
                        <div class="ticket-detail-field ml-auto fnOrdertView">
                            <a (click)="fnOrdertView()">{{data.order_id}}</a>
                        </div>

                        <div class="ticket-detail-field font-weight-bold">
                            Ticket code :
                        </div>
                        <div class="ticket-detail-field ml-auto">
                            {{data.ticket_id}}
                        </div>

                        <div class="ticket-detail-field font-weight-bold">
                            Status :
                        </div>
                        <div class="ticket-detail-field ml-auto">
                            {{data.order_status == 'P' ? 'Pending' : data.order_status == 'CO' ? 'Completed' : data.order_status == 'C' ? 'Cancel' : 'Void' }}
                        </div>

                        <div class="ticket-detail-field font-weight-bold">
                            Ticket type :
                        </div>
                        <div class="ticket-detail-field ml-auto">
                            {{data.ticket.ticket_name}}
                        </div>
                    </div>
                </div>

                <div class="mt-3 ticket-detail-title">
                    <div class="p-3">
                        <p class="pl-3 m-0 font-weight-bold">Ticket voucher</p>
                    </div>
                </div>

                <div class="mt-3 p-3">
                    <div class="pl-3">
                        <div class="p-3 ticket-voucher">
                            <div class="ticket-title">
                                Ticket 1 of 1
                            </div>
                            <div class="qrcodes">
                                <div class="col-6">
                                    <div class="d-inline-block">
                                        <ngx-qrcode [elementType]="elementType" [value]="value"></ngx-qrcode>
                                    </div>
                                </div>

                                <div class=" barcode d-inline-block">
                                    <ngx-barcode [bc-value]="value" [bc-display-value]="true"></ngx-barcode>
                                </div>

                            </div>

                            <div class="mt-3">
                                <div class="">
                                    <label for="" style="margin: 0;">TICKET CODE </label>
                                    <p class="m-0 font-weight-bold">{{data.ticket_id}}</p>
                                </div>

                                <div class="mt-3">
                                    <label for="" style="margin: 0;">TICKET TYPE</label>
                                    <p class="m-0 font-weight-bold">
                                        {{data.ticket.ticket_name}}
                                    </p>
                                </div>

                                <div class="mt-3">
                                    <label for="" style="margin: 0;">ATTENDEE NAME</label>
                                    <p class="m-0 font-weight-bold">
                                        {{data.customer.firstname?data.customer.firstname:''}} {{data.customer.lastname?data.customer.lastname:''}}
                                    </p>
                                </div>

                                <div class="mt-3">
                                    <label for="" style="margin: 0;">EVENT</label>
                                    <p class="m-0 font-weight-bold">{{eventDetail?.event_title}}</p>
                                    <p class="m-0 date">{{dateFormate(eventDetail?.start_date)}}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ------------------------------------------ -->
    <div *ngIf="ticketTypeView === 'confirm'">
        <div class="modal-body p-0">
            <div class="px-3 mt-3">

                <div class="px-3">
                    <div class="invalidate-ticket p-3">
                        <i class="fa fa-times-circle fa-lg mr-2"></i> This will invalidate the ticket for entry.
                    </div>
                </div>

                <div class="mt-2">
                    <div class="main-div-ticket-code-type px-3">
                        <div class="row m-0 px-3">
                            <div class="ticket-code-type font-weight-bold">
                                Ticket Code :
                            </div>

                            <div class="ticket-code-type ml-auto">
                                {{data.ticket_id}}
                            </div>

                            <div class="ticket-code-type font-weight-bold">
                                Ticket Type :
                            </div>

                            <div class="ticket-code-type ml-auto">
                                {{data.ticket.ticket_name}}
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
        <div class="modal-footer border-0">
            <div class="px-3">
                <button mat-flat-button class="void-ticket px-5" (click)="fnVoidTicket('voidview')">Void Ticket</button>
            </div>
        </div>
    </div>
    <!-- ------------------------------------------ -->
    <div *ngIf="ticketTypeView === 'voidview'">
        <div>
            <div class="modal-body p-0">
                <div class="px-3 mt-3">
                    <div class="px-3">
                        <div class="invalidate-ticket p-3">
                            <i class="fa fa-times-circle fa-lg mr-2"></i> This ticket was voided on: {{today}}
                        </div>
                    </div>
                    <!-- <div class="px-3 mt-4">
                        <div class="re-issue-notify p-3">
                            <i class="fa fa-bell fa-lg mr-2"></i> To re-issue or edit ticket details, click the order ID below.
                        </div>
                    </div> -->
                </div>
                <div id="print-ticket">
                    <div class="mt-3 ticket-detail-title">
                        <div class="p-3">
                            <p class="pl-3 m-0 font-weight-bold">Ticket details</p>
                        </div>
                    </div>

                    <div class="ticket-detail mt-2 p-3">
                        <div class="row m-0 pl-3">
                            <div class="ticket-detail-field font-weight-bold">
                                Order ID :
                            </div>
                            <div class="ticket-detail-field ml-auto fnOrdertView">
                                <a (click)="fnOrdertView()">  {{data.order_id}}</a>
                            </div>

                            <div class="ticket-detail-field font-weight-bold">
                                Ticket code :
                            </div>
                            <div class="ticket-detail-field ml-auto">
                                {{data.ticket_id}}
                            </div>

                            <div class="ticket-detail-field font-weight-bold">
                                Status :
                            </div>
                            <div class="ticket-detail-field ml-auto text-danger">
                                {{data.order_status}}
                            </div>

                            <div class="ticket-detail-field font-weight-bold">
                                Ticket type :
                            </div>
                            <div class="ticket-detail-field ml-auto">
                                {{data.ticket.ticket_name}}
                            </div>
                        </div>
                    </div>

                    <div class="mt-3 ticket-detail-title">
                        <div class="p-3">
                            <p class="pl-3 m-0 font-weight-bold">Ticket voucher</p>
                        </div>
                    </div>

                    <div class="mt-3 p-3">
                        <div class="pl-3">
                            <div class="p-3 ticket-voucher">
                                <div class="ticket-title">
                                    Ticket 1 of 1
                                </div>
                                <div class="qrcodes">
                                    <div class="d-inline-block">
                                        <ngx-qrcode [elementType]="elementType" [value]="value"></ngx-qrcode>
                                    </div>
                                    <div class=" barcode d-inline-block">
                                        <ngx-barcode [bc-value]="value" [bc-display-value]="true"></ngx-barcode>
                                    </div>
                                </div>

                                <div class="d-inline-block bg-danger text-center p-3 void-label">
                                    Void
                                </div>

                                <div class="mt-3">
                                    <div class="">
                                        <label for="">TICKET CODE </label>
                                        <p class="m-0 font-weight-bold">{{data.ticket_id}}</p>
                                    </div>

                                    <div class="mt-3">
                                        <label for="">TICKET TYPE</label>
                                        <p class="m-0 font-weight-bold"> {{data.ticket.ticket_name}}</p>
                                    </div>

                                    <div class="mt-3">
                                        <label for="">ATTENDEE NAME</label>
                                        <p class="m-0 font-weight-bold">
                                            {{data.customer.firstname?data.customer.firstname:''}} {{data.customer.firstname?data.customer.lastname:''}}

                                        </p>
                                    </div>
                                    <div class="mt-3">
                                        <label for="">EVENT</label>
                                        <p class="m-0 font-weight-bold">{{eventDetail?.event_title}}</p>
                                        <p class="m-0 date">{{dateFormate(eventDetail?.start_date)}}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>